<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="xenauction" title="XenAuction" version_string="" version_id="0" url="" install_callback_class="" install_callback_method="" uninstall_callback_class="" uninstall_callback_method="">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="init_dependencies" execute_order="10" callback_class="XenAuction_Listen" callback_method="init_dependecies" active="1" description=""/>
    <listener event_id="navigation_tabs" execute_order="10" callback_class="XenAuction_Listen" callback_method="navigation_tabs" active="1" description=""/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <optiongroups/>
  <permissions>
    <permission_groups/>
    <permissions/>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="auctions" version_id="0" version_string=""><![CDATA[Auctions]]></phrase>
    <phrase title="auction_list" version_id="0" version_string=""><![CDATA[Auction List]]></phrase>
    <phrase title="auction_title" version_id="0" version_string=""><![CDATA[Auction Title]]></phrase>
    <phrase title="availability" version_id="0" version_string=""><![CDATA[Availability]]></phrase>
    <phrase title="available" version_id="0" version_string=""><![CDATA[Available]]></phrase>
    <phrase title="bid" version_id="0" version_string=""><![CDATA[Bid]]></phrase>
    <phrase title="bidding_on_x" version_id="0" version_string=""><![CDATA[Bidding on {title}]]></phrase>
    <phrase title="bought_auction_message" version_id="0" version_string=""><![CDATA[Amount to pay: {buy_now}]]></phrase>
    <phrase title="bought_auction_x" version_id="0" version_string=""><![CDATA[Auction Bought: {title}]]></phrase>
    <phrase title="buying_x" version_id="0" version_string=""><![CDATA[Buying {title}]]></phrase>
    <phrase title="buyout" version_id="0" version_string=""><![CDATA[Buyout]]></phrase>
    <phrase title="buy_now" version_id="0" version_string=""><![CDATA[Buy Now]]></phrase>
    <phrase title="create_auction" version_id="0" version_string=""><![CDATA[Create Auction]]></phrase>
    <phrase title="days_left" version_id="0" version_string=""><![CDATA[Days Left]]></phrase>
    <phrase title="enable_bids" version_id="0" version_string=""><![CDATA[Enable Bids]]></phrase>
    <phrase title="enable_buyouts" version_id="0" version_string=""><![CDATA[Enable Buyouts]]></phrase>
    <phrase title="find_auction" version_id="0" version_string=""><![CDATA[Find Auction]]></phrase>
    <phrase title="hours_left" version_id="0" version_string=""><![CDATA[Hours Left]]></phrase>
    <phrase title="keyword_tag" version_id="0" version_string=""><![CDATA[Keyword / Tag]]></phrase>
    <phrase title="minutes_left" version_id="0" version_string=""><![CDATA[Minutes Left]]></phrase>
    <phrase title="my_activity" version_id="0" version_string=""><![CDATA[My Activity]]></phrase>
    <phrase title="no_bids" version_id="0" version_string=""><![CDATA[No bids]]></phrase>
    <phrase title="outbid_message" version_id="0" version_string=""><![CDATA[Outbid by: {username}]]></phrase>
    <phrase title="outbid_on_x" version_id="0" version_string=""><![CDATA[Outbid on: {title}]]></phrase>
    <phrase title="paying" version_id="0" version_string=""><![CDATA[Paying]]></phrase>
    <phrase title="place_bid" version_id="0" version_string=""><![CDATA[Place Bid]]></phrase>
    <phrase title="quantity" version_id="0" version_string=""><![CDATA[Quantity]]></phrase>
    <phrase title="requested_auction_not_found" version_id="0" version_string=""><![CDATA[Could not find the requested auction]]></phrase>
    <phrase title="requested_bid_not_found" version_id="0" version_string=""><![CDATA[Requested bid not found]]></phrase>
    <phrase title="seconds_left" version_id="0" version_string=""><![CDATA[Seconds Left]]></phrase>
    <phrase title="starting_bid" version_id="0" version_string=""><![CDATA[Starting Bid]]></phrase>
    <phrase title="summary" version_id="0" version_string=""><![CDATA[Summary]]></phrase>
    <phrase title="tags" version_id="0" version_string=""><![CDATA[Tags]]></phrase>
    <phrase title="won_auction_message" version_id="0" version_string=""><![CDATA[Amount to pay: {top_bid}]]></phrase>
    <phrase title="won_auction_x" version_id="0" version_string=""><![CDATA[Auction Won: {title}]]></phrase>
    <phrase title="your_bid" version_id="0" version_string=""><![CDATA[Your Bid]]></phrase>
  </phrases>
  <route_prefixes>
    <route_type type="public">
      <prefix original_prefix="auctions" class="XenAuction_RoutePrefix_Auctions" build_link="all"/>
    </route_type>
  </route_prefixes>
  <style_properties/>
  <templates>
    <template title="auction_bid" version_id="0" version_string=""><![CDATA[<xen:require css="auction_bid.css" />

<xen:title>{xen:phrase bidding_on_x, 'title={$auction.title}'}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auctions'}">{xen:phrase auctions}</xen:breadcrumb>
    <xen:breadcrumb href="{xen:link 'auctions/bid', '', 'id={$auction.auction_id}'}">{xen:phrase palce_bid}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'auctions/place-bid', '', 'id={$auction.auction_id}'}" class="xenForm formOverlay auctionBid" method="post">
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	<input type="hidden" name="id" value="{$auction.auction_id}"/>
	
	<xen:include template="auction_details_content" />
	
	<fieldset class="bid">
		<dl class="ctrlUnit">
			<dt>{xen:phrase your_bid}:</dt>
			<dd>
				<input type="text" name="bid" value="{xen:if $auction.top_bid, {xen:calc '{$auction.top_bid} + 1'}, $auction.min_bid}" class="textCtrl autoSize" size="20" maxlength="10" />
			</dd>
		</dl>

	</fieldset>
	
	<dl class="ctrlUnit submitUnit">
			<dt></dt>
			<dd>
				<input type="submit" value="{xen:phrase place_bid}" class="button primary" />
			</dd>
		</dl>

</form>]]></template>
    <template title="auction_bid.css" version_id="0" version_string=""><![CDATA[.auctionBid .icon
{
	float: left;
	width: 48px;
	height: 48px;
	background: url(./data/xenauction/image_s.png) center no-repeat;
	margin: 5px 10px;
}]]></template>
    <template title="auction_buyout" version_id="0" version_string=""><![CDATA[<xen:require css="auction_bid.css" />

<xen:title>{xen:phrase buying_x, 'title={$auction.title}'}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auctions'}">{xen:phrase auctions}</xen:breadcrumb>
    <xen:breadcrumb href="{xen:link 'auctions/bid', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'auctions/place-buyout', '', 'id={$auction.auction_id}'}" class="xenForm formOverlay auctionBid" method="post">
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	<input type="hidden" name="id" value="{$auction.auction_id}"/>
	
	<xen:include template="auction_details_content" />

	<fieldset class="bid">
		<xen:if is="{$auction.availability} > 1">
			<dl class="ctrlUnit">
				<dt>{xen:phrase quantity}:</dt>
				<dd>
					<input type="text" name="quantity" value="1" class="textCtrl autoSize" size="20" maxlength="10" />
				</dd>
			</dl>
		</xen:if>
		<dl class="ctrlUnit">
			<dt>{xen:phrase availability}:</dt>
			<dd>
				{$auction.availability}
			</dd>
		</dl>
		<dl class="ctrlUnit">
			<dt>{xen:phrase paying}:</dt>
			<dd>
				{$auction.buy_now}
			</dd>
		</dl>

	</fieldset>
	
	<dl class="ctrlUnit submitUnit">
			<dt></dt>
			<dd>
				<input type="submit" value="{xen:phrase buy_now}" class="button primary" />
			</dd>
		</dl>

</form>]]></template>
    <template title="auction_create" version_id="0" version_string=""><![CDATA[<xen:require css="auction_create.css" />

<xen:title>{xen:phrase create_auction}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auctions/create'}">{xen:phrase create_auction}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'auctions/add'}" method="post"
	class="xenForm AutoValidator auction"
	data-redirect="on"
>

	<xen:hook name="auction_create">
		
	<dl class="ctrlUnit">
		<dt><label for="ctrl_tags">{xen:phrase tags}:</label></dt>
		<dd><input type="text" name="tags" class="textCtrl" id="ctrl_tags" maxlength="255" /></dd>
	</dl>	

	<fieldset class="summary">
		
		<legend>{xen:phrase summary}</legend>
		
		<a href="#">
			<span class="icon img s" style="background-image: url('{$xenOptions.boardUrl}/data/xenauction/image.png')"></span>
		</a>
		
		<dl class="ctrlUnit fullWidth surplusLabel">
			<dt><label for="ctrl_title_thread_create">{xen:phrase title}:</label></dt>
			<dd><input type="text" name="title" class="textCtrl titleCtrl" id="ctrl_title_auction_create" maxlength="100" autofocus="true"
				placeholder="{xen:phrase auction_title}..." /></dd>
		</dl>
		
		<dl class="ctrlUnit fullWidth">
			<dt></dt>
			<dd>{xen:raw $editorTemplate}</dd>
		</dl>
	</fieldset>
	
	<fieldset class="details">
		
		<legend>{xen:phrase details}</legend>
		
		<dl class="ctrlUnit">
			<dt>{xen:phrase expires}:</dt>
			<dd>
				<select name="expires[month]" class="textCtrl autoSize">
					<option value="0">&nbsp;</option>
					<option value="1">{xen:phrase month_1}</option>
					<option value="2">{xen:phrase month_2}</option>
					<option value="3">{xen:phrase month_3}</option>
					<option value="4">{xen:phrase month_4}</option>
					<option value="5">{xen:phrase month_5}</option>
					<option value="6">{xen:phrase month_6}</option>
					<option value="7">{xen:phrase month_7}</option>
					<option value="8">{xen:phrase month_8}</option>
					<option value="9">{xen:phrase month_9}</option>
					<option value="10">{xen:phrase month_10}</option>
					<option value="11">{xen:phrase month_11}</option>
					<option value="12">{xen:phrase month_12}</option>
				</select>
				<input type="text" name="expires[day]" class="textCtrl autoSize" placeholder="{xen:phrase day}" size="2" maxlength="2" />
				<input type="text" name="expires[year]" class="textCtrl autoSize" placeholder="{xen:phrase year}" size="4" maxlength="4" />
			</dd>
		</dl>
		
		<dl class="ctrlUnit">
			<dt>{xen:phrase starting_bid}:</dt>
			<dd>
				<input type="text" name="starting_bid" class="textCtrl autoSize" size="10" maxlength="10" />
				<input type="checkbox" name="bid_enable" id="bid_enable" value="1" /> <label for="bid_enable">{xen:phrase enable_bids}</label>
			</dd>
		</dl>
			
		<dl class="ctrlUnit">
			<dt>{xen:phrase buyout}:</dt>
			<dd>
				<input type="text" name="buyout" class="textCtrl autoSize" size="10" maxlength="10" />
				<input type="checkbox" name="buyout_enable" id="buyout_enable" value="1" /> <label for="buyout_enable">{xen:phrase enable_buyouts}</label>
			</dd>
		</dl>
		
		<dl class="ctrlUnit">
			<dt>{xen:phrase availability}:</dt>
			<dd>
				<input type="text" name="availability" class="textCtrl autoSize" placeholder="{xen:phrase 0}" size="10" maxlength="10" />
			</dd>
		</dl>
		
	</fieldset>
	
	<!-- slot: after_editor -->

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd>
			<input type="submit" value="{xen:phrase create_auction}" accesskey="s" class="button primary" />
		</dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	
	</xen:hook>
	
</form>]]></template>
    <template title="auction_create.css" version_id="0" version_string=""><![CDATA[.auction .summary .icon
{
	width: 30px;
	height: 30px;
	
	margin: 20px 0 0 30px;
	
	float: left;
}

.textCtrl.titleCtrl
{
	margin-left: 10px !important;
	width: {xen:calc "{xen:property formWidth} - 40 - {xen:property textCtrl.border-left-width} - {xen:property textCtrl.border-right-width} - {xen:property textCtrl.padding-left} - {xen:property textCtrl.padding-right} - 2 * {xen:property ctrlUnitEdgeSpacer}"}px !important;
}

.auction .details .ctrlUnit dt
{
}
.ctrlUnit.double
{
	clear: both;
}

.ctrlUnit.double dt,
.ctrlUnit.double dd
{
	float: left;
}

.ctrlUnit.double dd
{
	width: 100px;
}]]></template>
    <template title="auction_details" version_id="0" version_string=""><![CDATA[<xen:require css="auction_bid.css" />

<xen:title>{$auction.title}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auctions'}">{xen:phrase auctions}</xen:breadcrumb>
    <xen:breadcrumb href="{xen:link 'auctions/bid', '', 'id={$auction.auction_id}'}">{xen:phrase palce_bid}</xen:breadcrumb>
</xen:navigation>

<form class="xenForm formOverlay auctionBid">

	<xen:include template="auction_details_content" />

</form>]]></template>
    <template title="auction_details_content" version_id="0" version_string=""><![CDATA[<div class="message">
	<div class="icon"></div>
	{xen:raw $auction.message}
</div>]]></template>
    <template title="auction_list" version_id="0" version_string=""><![CDATA[<xen:title>{xen:phrase auctions}</xen:title>

<xen:require css="auction_list.css" />
<xen:require js="js/xenauction/auctions.js" />

<ol class="section auctions">

	<xen:foreach loop="$auctions" value="$auction">
		<xen:include template="auction_list_item"/>
	</xen:foreach>
	
</ol>

<xen:sidebar>
	<div class="section secondaryContent auctionCreate">
		<a href="{xen:link auctions/create}" class="callToAction">
			<span>{xen:phrase create_auction}</span>
		</a>
	</div>
	<div class="section">
		<form action="{xen:link auctions}" method="post" class="secondaryContent findAuction">
			<h3>{xen:phrase find_auction}</h3>
				
			<input type="search" name="search" placeholder="{xen:phrase keyword_tag}..." results="0" class="textCtrl AutoComplete" data-autoSubmit="true" />
			<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
		</form>
	</div>

	<div class="section">
		<form action="{xen:link auctions/expire}" method="POST" class="secondaryContent">
			<h3>Expire Auction (DEV TOOL)</h3>
				
			<p>You can see the auction ID by clicking on a title and checking the "id=xxx" portion in the url</p>

			<input type="id" name="id" placeholder="ID" class="textCtrl"/>
			<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
		</form>
	</div>

</xen:sidebar>

<script type="text/javascript">
<!--
XenAuction.Config.currentTime 			= '{xen:helper auction, time}';
XenAuction.Config.phrases.secondsLeft 	= '{xen:phrase seconds_left}';
XenAuction.Config.phrases.minutesLeft 	= '{xen:phrase minutes_left}';
XenAuction.Config.phrases.hoursLeft 	= '{xen:phrase hours_left}';
XenAuction.Config.phrases.daysLeft 		= '{xen:phrase days_left}';
new XenAuction.List;
-->
</script>]]></template>
    <template title="auction_list.css" version_id="0" version_string=""><![CDATA[/* Item widths */
.auctionItem
{
	padding: 10px 0;
}

.auctionItem > ul > li
{
	display: inline-block;
	vertical-align: middle;
}

	.auctionItem li.icon
	{
		width: 10%;
		text-align: center;
	}

	.auctionItem li.descriptionWrap
	{
		width: 40%;
	}

	.auctionItem li.timeLeft
	{
		width: 15%;
	}

	.auctionItem li.highestBidder
	{
		width: 14%;
	}

	.auctionItem li.bid
	{
		width: 18%;
	}

/* Styling */

.auction_list .titleBar
{
	display: none;
}

.auctionItem .icon > div
{ 
	margin: auto;
	width: 48px;
	height: 48px;
	background: url(./data/xenauction/image_s.png) center no-repeat;
}

.auctionItem li.descriptionWrap h3 
{
	font-weight: bold;
	font-size: 120%;
}

	.auctionItem li.descriptionWrap h3  a
	{
		display: block;
		overflow: hidden;
		text-overflow: ellipsis;
		-o-text-overflow: ellipsis;
		max-height: 22px;
	}

.auctionItem li.descriptionWrap .tags
{
	float: right;
	font-size: 90%;
	color: {xen:property dimmedTextColor};
}

.auctionItem li.timeLeft .amount, .auctionItem .availability .amount
{
	font-size: 110%;
	font-weight: bold;
}

.auctionItem li.timeLeft, .auctionItem li.highestBidder, .auctionItem .availability 
{
	text-align: center;
}

.auctionItem li.highestBidder .img
{
	margin: auto;
}

.auctionItem li.bid
{
	text-align: right;
}

	.auctionItem li.bid span
	{
		display: block;
		float: left;
		width: 50%;
		text-align: right;
		font-weight: bold;
	}

		.auctionItem li.bid > ul > li:last-child
		{
			border-top: 1px solid {xen:property primaryLighterStill};
		}

		.auctionItem li.bid > ul > li:first-child
		{
			border-top: 0px !important;
		}

.auctionCreate
{
	padding: 20px;
	text-align: center;
}

	.auctionCreate a.callToAction
	{
		height: 25px;
		line-height: 25px;
	}

	.auctionCreate a.callToAction span
	{
		font-size: 14px;
	}]]></template>
    <template title="auction_list_item" version_id="0" version_string=""><![CDATA[<xen:require css="auction_list.css" />
<xen:require js="js/xenauction/auctions.js" />

<li class="primaryContent auctionItem">

	<ul>
		<li class="icon"><div></div></li>
		<li class="descriptionWrap">
			<span class="tags">{$auction.tags}</span>
			<h3 class="title"><a class="OverlayTrigger" href="{xen:link 'auctions/details', '', 'id={$auction.auction_id}'}">{$auction.title}</a></h3>
			<div class="description">{xen:string wordtrim, {xen:helper auction, stripHtml, {$auction.message}}, 80}</div>
		</li>
		<li class="timeLeft">{$auction.expiration_date}</li>
		<li class="highestBidder">
			<xen:if is="{$auction.top_bidder}">
				<xen:avatar user="$auction" size="s" />
			<xen:elseif is=" ! {$auction.min_bid}"/>
				<div class="availability">
					<div class="amount">{$auction.availability}</div>
					<div class="description">{xen:phrase available}</div>
				</div>
			<xen:else/>
				{xen:phrase no_bids}
			</xen:if>
		</li>
		<li class="bid">
			<ul>
				<xen:if is="{$auction.min_bid}">
					<xen:if is="{$auction.top_bid}">
						<li>
							<span>{xen:number $auction.top_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auctions/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
						</li>
					<xen:else/>
						<li>
							<span>{xen:number $auction.min_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auctions/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
						</li>
					</xen:if>
				</xen:if>
				<xen:if is="{$auction.buy_now}">
					<li>
						<span>{xen:number $auction.buy_now}</span> <a class="OverlayTrigger" href="{xen:link 'auctions/buyout', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</a>
					</li>
				</xen:if>
			</ul>
		</li>
	</ul>
	
</li>]]></template>
    <template title="navigation_tab_auctions" version_id="0" version_string=""><![CDATA[<ul class="secondaryContent blockLinksList">
	<li><a href="{xen:link auctions}">{xen:phrase auction_list}</a></li>
	<li><a href="{xen:link auctions/create}">{xen:phrase create_auction}</a></li>
	<li><a href="#">{xen:phrase my_activity}</a></li>
</ul>]]></template>
  </templates>
  <bb_code_media_sites/>
  <template_modifications/>
</addon>
