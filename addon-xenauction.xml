<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="xenauction" title="XenAuction" version_string="1.0 Beta 1" version_id="1" url="" install_callback_class="XenAuction_Install" install_callback_method="install" uninstall_callback_class="XenAuction_Install" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="init_dependencies" execute_order="10" callback_class="XenAuction_Listen" callback_method="init_dependecies" active="1" description=""/>
    <listener event_id="navigation_tabs" execute_order="10" callback_class="XenAuction_Listen" callback_method="navigation_tabs" active="1" description=""/>
  </code_event_listeners>
  <cron>
    <entry entry_id="auctions" cron_class="XenAuction_CronEntry_Auction" cron_method="runExpireAuctions" active="1"><![CDATA[{"day_type":"dom","dom":["-1"],"hours":["-1"],"minutes":["-1"]}]]></entry>
  </cron>
  <email_templates/>
  <optiongroups>
    <group group_id="auctions" display_order="5000" debug_only="0"/>
    <option option_id="auctionNotificationSender" edit_format="textbox" data_type="unsigned_integer" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="auctions" display_order="1"/>
    </option>
    <option option_id="auctionsPerPage" edit_format="spinbox" data_type="unsigned_numeric" can_backup="1">
      <default_value>15</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="auctions" display_order="200"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups>
      <permission_group permission_group_id="auctions"/>
    </permission_groups>
    <permissions>
      <permission permission_group_id="auctions" permission_id="bidOnAuctions" permission_type="flag" depend_permission_id="viewAuctions" default_value="unset" interface_group_id="auctions" display_order="1"/>
      <permission permission_group_id="auctions" permission_id="buyoutAuctions" permission_type="flag" depend_permission_id="viewAuctions" default_value="unset" interface_group_id="auctions" display_order="1"/>
      <permission permission_group_id="auctions" permission_id="createAuctions" permission_type="flag" depend_permission_id="viewAuctions" default_value="unset" interface_group_id="auctions" display_order="1"/>
      <permission permission_group_id="auctions" permission_id="searchAuctions" permission_type="flag" depend_permission_id="viewAuctions" default_value="unset" interface_group_id="auctions" display_order="1"/>
      <permission permission_group_id="auctions" permission_id="viewAuctions" permission_type="flag" default_value="unset" interface_group_id="auctions" display_order="1"/>
    </permissions>
    <interface_groups>
      <interface_group interface_group_id="auctions" display_order="1"/>
    </interface_groups>
  </permissions>
  <phrases>
    <phrase title="amount_paid" version_id="0" version_string=""><![CDATA[Amount Paid]]></phrase>
    <phrase title="auctions" version_id="0" version_string=""><![CDATA[Auctions]]></phrase>
    <phrase title="auction_history" version_id="0" version_string=""><![CDATA[Auction History]]></phrase>
    <phrase title="auction_list" version_id="0" version_string=""><![CDATA[Auction List]]></phrase>
    <phrase title="auction_title" version_id="0" version_string=""><![CDATA[Auction Title]]></phrase>
    <phrase title="availability" version_id="0" version_string=""><![CDATA[Availability]]></phrase>
    <phrase title="availability_too_high" version_id="0" version_string=""><![CDATA[You can't use an availability higher than 1 if you are also allowing bids]]></phrase>
    <phrase title="available" version_id="0" version_string=""><![CDATA[Available]]></phrase>
    <phrase title="bid" version_id="0" version_string=""><![CDATA[Bid]]></phrase>
    <phrase title="bidding_on_x" version_id="0" version_string=""><![CDATA[Bidding on {title}]]></phrase>
    <phrase title="bid_must_be_higher" version_id="0" version_string=""><![CDATA[Your bid must be higher than the current bid]]></phrase>
    <phrase title="bought_auction_message" version_id="0" version_string=""><![CDATA[Amount to pay: {buy_now}]]></phrase>
    <phrase title="bought_auction_x" version_id="0" version_string=""><![CDATA[Auction Bought: {title}]]></phrase>
    <phrase title="buying_x" version_id="0" version_string=""><![CDATA[Buying {title}]]></phrase>
    <phrase title="buyout" version_id="0" version_string=""><![CDATA[Buyout]]></phrase>
    <phrase title="buy_now" version_id="0" version_string=""><![CDATA[Buy Now]]></phrase>
    <phrase title="canceled" version_id="0" version_string=""><![CDATA[Canceled]]></phrase>
    <phrase title="cant_buy_own_auction" version_id="0" version_string=""><![CDATA[You cannot buy your own auctions]]></phrase>
    <phrase title="cant_buy_zero" version_id="0" version_string=""><![CDATA[Entered quantity is too low]]></phrase>
    <phrase title="create_auction" version_id="0" version_string=""><![CDATA[Create Auction]]></phrase>
    <phrase title="cron_entry_auctions" version_id="0" version_string=""><![CDATA[Expire Auctions]]></phrase>
    <phrase title="date_is_in_past" version_id="0" version_string=""><![CDATA[You selected a date that is in the past]]></phrase>
    <phrase title="days_left" version_id="0" version_string=""><![CDATA[Days Left]]></phrase>
    <phrase title="enable_bids" version_id="0" version_string=""><![CDATA[Enable Bids]]></phrase>
    <phrase title="enable_buyouts" version_id="0" version_string=""><![CDATA[Enable Buyouts]]></phrase>
    <phrase title="enter_availability_higher_than_zero" version_id="0" version_string=""><![CDATA[Please enter an availability higher than zero]]></phrase>
    <phrase title="expires_in" version_id="0" version_string=""><![CDATA[Expires in]]></phrase>
    <phrase title="filter_by_tag" version_id="0" version_string=""><![CDATA[Filter by tag]]></phrase>
    <phrase title="find_auction" version_id="0" version_string=""><![CDATA[Find Auction]]></phrase>
    <phrase title="finished" version_id="0" version_string=""><![CDATA[Finished]]></phrase>
    <phrase title="history" version_id="0" version_string=""><![CDATA[History]]></phrase>
    <phrase title="hours_left" version_id="0" version_string=""><![CDATA[Hours Left]]></phrase>
    <phrase title="invalid_buy_action" version_id="0" version_string=""><![CDATA[Action not allowed on this type of auction]]></phrase>
    <phrase title="keyword_tag" version_id="0" version_string=""><![CDATA[Keyword / Tag]]></phrase>
    <phrase title="minutes_left" version_id="0" version_string=""><![CDATA[Minutes Left]]></phrase>
    <phrase title="must_use_bid_or_buyout" version_id="0" version_string=""><![CDATA[You have to select either a bid or a buyout value]]></phrase>
    <phrase title="my_activity" version_id="0" version_string=""><![CDATA[My Activity]]></phrase>
    <phrase title="no_bids" version_id="0" version_string=""><![CDATA[No bids]]></phrase>
    <phrase title="option_auctionNotificationSender" version_id="0" version_string=""><![CDATA[User ID that sends notifications]]></phrase>
    <phrase title="option_auctionNotificationSender_explain" version_id="0" version_string=""><![CDATA[Enter the ID of the user that will be used to send auction notifications. Note that this user should NOT participate in any other part of the auctions (eg. bidding, buying and creating auctions).]]></phrase>
    <phrase title="option_auctionsPerPage" version_id="0" version_string=""><![CDATA[Auctions Per Page]]></phrase>
    <phrase title="option_auctionsPerPage_explain" version_id="0" version_string=""><![CDATA[Auctions to show per page]]></phrase>
    <phrase title="option_group_auctions" version_id="0" version_string=""><![CDATA[Auctions]]></phrase>
    <phrase title="option_group_auctions_description" version_id="0" version_string=""><![CDATA[]]></phrase>
    <phrase title="outbid_message" version_id="0" version_string=""><![CDATA[Outbid by: {username}]]></phrase>
    <phrase title="outbid_on_x" version_id="0" version_string=""><![CDATA[Outbid on: {title}]]></phrase>
    <phrase title="paying" version_id="0" version_string=""><![CDATA[Paying]]></phrase>
    <phrase title="permission_auctions_bidOnAuctions" version_id="0" version_string=""><![CDATA[Bid On Auctions]]></phrase>
    <phrase title="permission_auctions_buyoutAuctions" version_id="0" version_string=""><![CDATA[Buyout Auctions]]></phrase>
    <phrase title="permission_auctions_createAuctions" version_id="0" version_string=""><![CDATA[Create Auctions]]></phrase>
    <phrase title="permission_auctions_searchAuctions" version_id="0" version_string=""><![CDATA[Search Auctions]]></phrase>
    <phrase title="permission_auctions_viewAuctions" version_id="0" version_string=""><![CDATA[View Auctions]]></phrase>
    <phrase title="permission_group_auctions" version_id="0" version_string=""><![CDATA[Auctions]]></phrase>
    <phrase title="permission_interface_auctions" version_id="0" version_string=""><![CDATA[Auctions]]></phrase>
    <phrase title="place_bid" version_id="0" version_string=""><![CDATA[Place Bid]]></phrase>
    <phrase title="quantity" version_id="0" version_string=""><![CDATA[Quantity]]></phrase>
    <phrase title="quantity_not_available" version_id="0" version_string=""><![CDATA[You are trying to buy a higher quantity than there is available]]></phrase>
    <phrase title="requested_auction_not_found" version_id="0" version_string=""><![CDATA[Could not find the requested auction]]></phrase>
    <phrase title="requested_bid_not_found" version_id="0" version_string=""><![CDATA[Requested bid not found]]></phrase>
    <phrase title="seconds_left" version_id="0" version_string=""><![CDATA[Seconds Left]]></phrase>
    <phrase title="select_one" version_id="0" version_string=""><![CDATA[Select One]]></phrase>
    <phrase title="starting_bid" version_id="0" version_string=""><![CDATA[Starting Bid]]></phrase>
    <phrase title="summary" version_id="0" version_string=""><![CDATA[Summary]]></phrase>
    <phrase title="tags" version_id="0" version_string=""><![CDATA[Tags]]></phrase>
    <phrase title="won_auction_message" version_id="0" version_string=""><![CDATA[Amount to pay: {top_bid}]]></phrase>
    <phrase title="won_auction_x" version_id="0" version_string=""><![CDATA[Auction Won: {title}]]></phrase>
    <phrase title="your_auctions" version_id="0" version_string=""><![CDATA[Your Auctions]]></phrase>
    <phrase title="your_bid" version_id="0" version_string=""><![CDATA[Your Bid]]></phrase>
    <phrase title="your_bids" version_id="0" version_string=""><![CDATA[Your Bids]]></phrase>
    <phrase title="your_buyouts" version_id="0" version_string=""><![CDATA[Your Buyouts]]></phrase>
    <phrase title="you_have_no_auctions" version_id="0" version_string=""><![CDATA[You have no active auctions]]></phrase>
    <phrase title="you_have_no_bids" version_id="0" version_string=""><![CDATA[You have not placed any bids]]></phrase>
    <phrase title="you_have_no_buyouts" version_id="0" version_string=""><![CDATA[You have not placed any buyouts]]></phrase>
  </phrases>
  <route_prefixes>
    <route_type type="public">
      <prefix original_prefix="auction-bid" class="XenAuction_RoutePrefix_Bid" build_link="all"/>
      <prefix original_prefix="auction-history" class="XenAuction_RoutePrefix_History" build_link="all"/>
      <prefix original_prefix="auction-process" class="XenAuction_RoutePrefix_Process" build_link="all"/>
      <prefix original_prefix="auctions" class="XenAuction_RoutePrefix_Auctions" build_link="all"/>
    </route_type>
  </route_prefixes>
  <style_properties/>
  <templates>
    <template title="auction_bid" version_id="0" version_string=""><![CDATA[<xen:require css="auction_bid.css" />

<xen:title>{xen:phrase bidding_on_x, 'title={$auction.title}'}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase palce_bid}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'auction-bid/place-bid', '', 'id={$auction.auction_id}'}" class="xenForm formOverlay auctionBid" method="post">
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	<input type="hidden" name="id" value="{$auction.auction_id}"/>
	
	<input type="hidden" class="min_bid" value="{xen:if $auction.top_bid, {xen:calc '{$auction.top_bid} + 1'}, $auction.min_bid}"/>
	
	<xen:include template="auction_details_content" />
	
	<fieldset class="bid">
		<dl class="ctrlUnit">
			<dt>{xen:phrase your_bid}:</dt>
			<dd>
				<input type="text" name="bid" value="{xen:if $auction.top_bid, {xen:calc '{$auction.top_bid} + 1'}, $auction.min_bid}" class="textCtrl autoSize" size="20" maxlength="10" />
			</dd>
		</dl>

	</fieldset>
	
	<dl class="ctrlUnit submitUnit">
			<dt></dt>
			<dd>
				<input type="submit" value="{xen:phrase place_bid}" class="button primary" />
			</dd>
		</dl>

</form>

<script type="text/javascript"><!--
new XenAuction.Bid;
//--></script>]]></template>
    <template title="auction_bid.css" version_id="0" version_string=""><![CDATA[.auctionBid .icon
{
	float: left;
	width: 48px;
	height: 48px;
	background: url(./data/xenauction/image_s.png) center no-repeat;
	margin: 5px 10px;
}]]></template>
    <template title="auction_buyout" version_id="0" version_string=""><![CDATA[<xen:require css="auction_bid.css" />

<xen:title>{xen:phrase buying_x, 'title={$auction.title}'}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auction-bid/buyout', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'auction-bid/place-buyout', '', 'id={$auction.auction_id}'}" class="xenForm formOverlay auctionBid" method="post">
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	<input type="hidden" name="id" value="{$auction.auction_id}"/>
	
	<input type="hidden" class="cost" value="{$auction.buy_now}"/>
	<input type="hidden" class="availability" value="{$auction.availability}"/>
	
	<xen:include template="auction_details_content" />

	<fieldset class="bid">
		<xen:if is="{$auction.availability} > 1">
			<dl class="ctrlUnit">
				<dt>{xen:phrase quantity}:</dt>
				<dd>
					<input type="text" name="quantity" value="1" class="textCtrl autoSize" size="20" maxlength="10" />
				</dd>
			</dl>
		<xen:else/>
			<input type="hidden" name="quantity" value="1" />
		</xen:if>
		<dl class="ctrlUnit">
			<dt>{xen:phrase availability}:</dt>
			<dd>
				{$auction.availability}
			</dd>
		</dl>
		<dl class="ctrlUnit">
			<dt>{xen:phrase paying}:</dt>
			<dd class="paying">
				{$auction.buy_now}
			</dd>
		</dl>

	</fieldset>
	
	<dl class="ctrlUnit submitUnit">
			<dt></dt>
			<dd>
				<input type="submit" value="{xen:phrase buy_now}" class="button primary" />
			</dd>
		</dl>

</form>

<script type="text/javascript"><!--
new XenAuction.Bid;
//--></script>]]></template>
    <template title="auction_create" version_id="1" version_string="1.0 Beta 1"><![CDATA[<xen:require css="auction_create.css" />
<xen:require js="js/xenauction/auctions.js" />

<xen:title>{xen:phrase create_auction}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auction-process/create'}">{xen:phrase create_auction}</xen:breadcrumb>
</xen:navigation>

<!--<form action="{xen:link 'auction-process/add'}" method="post"
	class="xenForm AutoValidator auction"
	data-redirect="on"
	enctype="multipart/form-data"
>-->

<form action="{xen:link 'auction-process/add'}" method="post"
	class="xenForm auction"
	enctype="multipart/form-data"
>

	<xen:hook name="auction_create">
		
	<dl class="ctrlUnit">
		<dt><label for="ctrl_tags">{xen:phrase tags}:</label></dt>
		<dd><input type="text" name="tags" class="textCtrl" id="ctrl_tags" maxlength="255" /></dd>
	</dl>	

	<div class="summary">
		
		<dl class="ctrlUnit fullWidth surplusLabel">
			<dt><label for="ctrl_title_thread_create">{xen:phrase title}:</label></dt>
			<dd><input type="text" name="title" class="textCtrl titleCtrl" id="ctrl_title_auction_create" maxlength="100" autofocus="true"
				placeholder="{xen:phrase auction_title}..." /></dd>
		</dl>
		
		<dl class="ctrlUnit fullWidth">
			<dt></dt>
			<dd>{xen:raw $editorTemplate}</dd>
		</dl>
	</div>
	
	<div class="details">
		
		<h3 class="textHeading">{xen:phrase details}</h3>
		
		<dl class="ctrlUnit">
			<dt>Image:</dt>
			<dd><input type="file" name="image" /></dd>
		</dl>
		
		<dl class="ctrlUnit">
			<dt>{xen:phrase expires_in}:</dt>
			<dd>
				<input type="text" name="expires" class="textCtrl autoSize" value="3" size="5" maxlength="5" />
				&nbsp;
				{xen:phrase days}
			</dd>
		</dl>
		
		<dl class="ctrlUnit">
			<dt>{xen:phrase starting_bid}:</dt>
			<dd>
				<input type="text" name="starting_bid" class="textCtrl autoSize" size="10" maxlength="10" disabled="disabled" />
				<input type="checkbox" name="bid_enable" id="bid_enable" value="1" /> <label for="bid_enable">{xen:phrase enable_bids}</label>
			</dd>
		</dl>
			
		<dl class="ctrlUnit">
			<dt>{xen:phrase buyout}:</dt>
			<dd>
				<input type="text" name="buyout" class="textCtrl autoSize" size="10" maxlength="10" disabled="disabled" />
				<input type="checkbox" name="buyout_enable" id="buyout_enable" value="1" /> <label for="buyout_enable">{xen:phrase enable_buyouts}</label>
			</dd>
		</dl>
		
		<dl class="ctrlUnit" id="availability_wrap" style="display: none;">
			<dt>{xen:phrase availability}:</dt>
			<dd>
				<input type="text" name="availability" class="textCtrl autoSize" placeholder="1" size="10" maxlength="10"/>
			</dd>
		</dl>
		
	</div>
	
	<!-- slot: after_editor -->

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd>
			<input type="submit" value="{xen:phrase create_auction}" accesskey="s" class="button primary" />
		</dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	
	</xen:hook>
	
</form>

<script type="text/javascript"><!--
<xen:include template="auction_phrases_js"/>
new XenAuction.Create;
//--></script>]]></template>
    <template title="auction_create.css" version_id="1" version_string="1.0 Beta 1"><![CDATA[.auction .summary .icon
{
	width: 30px;
	height: 30px;
	
	margin: 20px 0 0 30px;
	
	float: left;
}

.textCtrl.titleCtrl
{
	margin-left: 30px !important;
	width: {xen:calc "{xen:property formWidth} - {xen:property textCtrl.border-left-width} - {xen:property textCtrl.border-right-width} - {xen:property textCtrl.padding-left} - {xen:property textCtrl.padding-right} - 2 * {xen:property ctrlUnitEdgeSpacer}"}px !important;
}

.auction .details
{
	margin-top: 30px;
}

.auction .details .ctrlUnit dt
{
}
.ctrlUnit.double
{
	clear: both;
}

.ctrlUnit.double dt,
.ctrlUnit.double dd
{
	float: left;
}

.ctrlUnit.double dd
{
	width: 100px;
}]]></template>
    <template title="auction_details" version_id="0" version_string=""><![CDATA[<xen:require css="auction_bid.css" />

<xen:title>{$auction.title}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auctions'}">{xen:phrase auctions}</xen:breadcrumb>
    <xen:breadcrumb href="{xen:link 'auctions/bid', '', 'id={$auction.auction_id}'}">{xen:phrase palce_bid}</xen:breadcrumb>
</xen:navigation>

<form class="xenForm formOverlay auctionBid">

	<xen:include template="auction_details_content" />

</form>]]></template>
    <template title="auction_details.css" version_id="1" version_string="1.0 Beta 1"><![CDATA[.auctionDetails .message
{
	min-height: 170px;
}

.auctionDetails .auctionImage
{
	float: right;
	margin: 10px;
	
	border-radius: 4px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	-khtml-border-radius: 4px;
}]]></template>
    <template title="auction_details_content" version_id="1" version_string="1.0 Beta 1"><![CDATA[<xen:require css="auction_details.css" />

<div class="auctionDetails">

	<div class="message">
		{xen:helper auction, image, $auction, 'n', false, false}
		{xen:raw $auction.message}
	</div>

</div>]]></template>
    <template title="auction_history_auctions" version_id="1" version_string="1.0 Beta 1"><![CDATA[<div>
<xen:if is="{$auctions}">
	
	<div class="pageNavLinkGroup">
		<xen:pagenav link="auction-history#_auctions" page="{$page}" perpage="{$perPage}" total="{$total}" />
	</div>
	
	<table class="auctions">
	
		<tbody>
			<xen:foreach loop="$auctions" value="$auction">
				<xen:include template="auction_list_item"/>
			</xen:foreach>
		</tbody>
		
	</table>
	
	<div class="pageNavLinkGroup">
		<xen:pagenav link="auction-history#_auctions" page="{$page}" perpage="{$perPage}" total="{$total}" />
	</div>
	
	<script type="text/javascript">
	<!--
	<xen:include template="auction_phrases_js"/>
	new XenAuction.List;
	-->
	</script>
<xen:else/>
	<div>{xen:phrase you_have_no_auctions}</div>
</xen:if>
</div>]]></template>
    <template title="auction_history_bids" version_id="1" version_string="1.0 Beta 1"><![CDATA[<div>
<xen:if is="{$auctions}">
	
	<div class="pageNavLinkGroup">
		<xen:pagenav link="auction-history#_bids" page="{$page}" perpage="{$perPage}" total="{$total}" />
	</div>
	
	<table class="auctionHistory">
		<tbody>
			
			<xen:foreach loop="$auctions" value="$auction">
				
				<tr class="primaryContent auctionItem status_{$auction.status}">
					<td class="icon">
						{xen:helper auction, image, $auction, 't', true}
					</td>
					<td class="title">
						<h3 class="title"><a class="OverlayTrigger" href="{xen:link 'auctions/details', '', 'id={$auction.auction_id}'}">{$auction.title}</a></h3>
					</td>
					<td class="timeLeft">
						<xen:if is="{$auction.status} == 'active'">
							{$auction.expiration_date}
						<xen:elseif is="{$auction.status} == 'canceled'"/>
							{xen:phrase canceled}
						<xen:else/>
							<xen:if is="{$auction.top_bidder}">
								{xen:phrase finished}
							<xen:else/>
								{xen:phrase expired}
							</xen:if>		
						</xen:if>
					</td>
					<td class="highestBidder {xen:if '{$auction.username} == {$visitor.username}', 'me', 'notme'}">
						<xen:if is="{$auction.top_bidder}">
							{$auction.username}
						<xen:elseif is=" ! {$auction.min_bid}"/>
							<div class="availability">
								<div class="amount">{$auction.availability}</div>
								<div class="description">{xen:phrase available}</div>
							</div>
						<xen:else/>
							{xen:phrase no_bids}
						</xen:if>
					</td>
					<td class="bid">
						<ul>
							<xen:if is="{$auction.status} == 'active'">
								
								<xen:if is="{$auction.min_bid}">
									<xen:if is="{$auction.top_bid}">
										<li class="{xen:if '! {$auction.buy_now}', 'single'}">
											<span>{xen:number $auction.top_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
										</li>
									<xen:else/>
										<li class="{xen:if '! {$auction.buy_now}', 'single'}">
											<span>{xen:number $auction.min_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
										</li>
									</xen:if>
								</xen:if>
								<xen:if is="{$auction.buy_now}">
									<li class="{xen:if '! {$auction.min_bid}', 'single'}">
										<span>{xen:number $auction.buy_now}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/buyout', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</a>
									</li>
								</xen:if>
								
							<xen:elseif is="{$auction.status} == 'canceled'"/>
								
								<li class="single large"><span>{xen:phrase canceled}</span></li>
								
							<xen:else/>
							
								<li class="single large"><span>{xen:number $auction.amount}</span></li>
							
							</xen:if>
						</ul>
					</td>
				</tr>
				
			</xen:foreach>
			
		</tbody>
	</table>
	
	<div class="pageNavLinkGroup">
		<xen:pagenav link="auction-history#_bids" page="{$page}" perpage="{$perPage}" total="{$total}" />
	</div>
	
	<script type="text/javascript">
	<!--
	<xen:include template="auction_phrases_js"/>
	new XenAuction.List;
	-->
	</script>
<xen:else/>
	<div>{xen:phrase you_have_no_bids}</div>
</xen:if>
</div>]]></template>
    <template title="auction_history_buyouts" version_id="1" version_string="1.0 Beta 1"><![CDATA[<div>
<xen:if is="{$auctions}">
	
	<div class="pageNavLinkGroup">
		<xen:pagenav link="auction-history#_buyouts" page="{$page}" perpage="{$perPage}" total="{$total}" />
	</div>
	
	<table class="auctionHistory">
		<tbody>
			
			<xen:foreach loop="$auctions" value="$auction">
				
				<tr class="primaryContent auctionItem status_{$auction.status}">
					<td class="icon">
						{xen:helper auction, image, $auction, 't', true}
					</td>
					<td class="title">
						<h3 class="title"><a class="OverlayTrigger" href="{xen:link 'auctions/details', '', 'id={$auction.auction_id}'}">{$auction.title}</a></h3>
					</td>
					<td class="timeLeft">
						<xen:if is="{$auction.status} == 'active'">
							{$auction.expiration_date}
						<xen:elseif is="{$auction.status} == 'canceled'"/>
							{xen:phrase canceled}
						<xen:else/>
							<xen:if is="{$auction.top_bidder}">
								{xen:phrase finished}
							<xen:else/>
								{xen:phrase expired}
							</xen:if>		
						</xen:if>
					</td>
					<td class="purchaseAmount">
						<dl>
							<dd>{xen:phrase quantity}:</dd>
							<dt>{xen:number $auction.quantity}</dt>
							<dd>{xen:phrase amount_paid}:</dd>
							<dt>{xen:number $auction.amount}</dt>
						</dl>
					</td>
					<td class="purchaseDate">
						<div class="DateTime muted">{xen:date {$auction.bid_date}}</div>
						<div class="DateTime muted">{xen:time {$auction.bid_date}}</div>
					</td>
					<td class="bid">
						<ul>
							<xen:if is="{$auction.status} == 'active'">
								
								<xen:if is="{$auction.min_bid}">
									<xen:if is="{$auction.top_bid}">
										<li class="{xen:if '! {$auction.buy_now}', 'single'}">
											<span>{xen:number $auction.top_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
										</li>
									<xen:else/>
										<li class="{xen:if '! {$auction.buy_now}', 'single'}">
											<span>{xen:number $auction.min_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
										</li>
									</xen:if>
								</xen:if>
								<xen:if is="{$auction.buy_now}">
									<li class="{xen:if '! {$auction.min_bid}', 'single'}">
										<span>{xen:number $auction.buy_now}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/buyout', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</a>
									</li>
								</xen:if>
								
							<xen:elseif is="{$auction.status} == 'canceled'"/>
								
								<li class="single large"><span>{xen:phrase canceled}</span></li>
								
							<xen:else/>
							
								<li class="single large"><span>{xen:number $auction.amount}</span></li>
							
							</xen:if>
						</ul>
					</td>
				</tr>
				
			</xen:foreach>
			
		</tbody>
	</table>
	
	<div class="pageNavLinkGroup">
		<xen:pagenav link="auction-history#_buyouts" page="{$page}" perpage="{$perPage}" total="{$total}" />
	</div>
	
	<script type="text/javascript">
	<!--
	<xen:include template="auction_phrases_js"/>
	new XenAuction.List;
	-->
	</script>
<xen:else/>
	<div>{xen:phrase you_have_no_buyouts}</div>
</xen:if>
</div>]]></template>
    <template title="auction_history_list" version_id="1" version_string="1.0 Beta 1"><![CDATA[<xen:title>{xen:phrase auction_history}</xen:title>

<xen:navigation>
    <xen:breadcrumb href="{xen:link 'auctions/history'}">{xen:phrase history}</xen:breadcrumb>
</xen:navigation>


<xen:require css="auction_list.css" />
<xen:require css="auction_history_list.css" />
<xen:require js="js/xenauction/auctions.js" />

<ul id="HistoryTabs" class="tabs mainTabs" data-panes="#HistoryPanes > li" data-history="on">
	<li class="active"><a href="{$requestPaths.requestUri}#_auctions" class="active">{xen:phrase your_auctions}</a></li>
	<li><a href="{$requestPaths.requestUri}#_bids">{xen:phrase your_bids}</a></li>
	<li><a href="{$requestPaths.requestUri}#_buyouts">{xen:phrase your_buyouts}</a></li>
</ul>

<ul id="HistoryPanes">
	<li id="_auctions" class="auctions" data-loadUrl="{xen:link 'auction-history/auctions', '', 'page={$page}'}"></li>
	<li id="_bids" class="bidbuyHistory" data-loadUrl="{xen:link 'auction-history/bids', '', 'page={$page}'}"></li>
	<li id="_buyouts" class="bidbuyHistory" data-loadUrl="{xen:link 'auction-history/buyouts', '', 'page={$page}'}"></li>
</ul>

<script type="text/javascript"><!--
$(document).ready(function() {
	new XenAuction.HistoryPanes;
});
//--></script>]]></template>
    <template title="auction_history_list.css" version_id="1" version_string="1.0 Beta 1"><![CDATA[.auctionHistory
{
	width: 100%;
}

/* Item widths */
.bidbuyHistory .auctionItem td
{
	padding: 10px 0;
}

	.bidbuyHistory .auctionItem td.icon
	{
		width: 60px;
		text-align: center;
	}

	.bidbuyHistory .auctionItem td.timeLeft
	{
		width: 150px;
	}

	.bidbuyHistory .auctionItem td.highestBidder
	{
		width: 100px;
	}
	
	.bidbuyHistory .auctionItem td.purchaseAmount
	{
		width: 150px;
	}
	
	.bidbuyHistory .auctionItem td.purchaseDate
	{
		width: 100px;
	}

	.bidbuyHistory .auctionItem td.bid
	{
		width: 250px;
	}

/* Styling */

.bidbuyHistory > li > div
{
	margin: 5px;
}

.bidbuyHistory .auction_list .titleBar
{
	display: none;
}

.bidbuyHistory .auctionItem td.title h3 
{
	font-weight: bold;
	font-size: 120%;
}

	.bidbuyHistory .auctionItem td.title h3  a
	{
		display: block;
		overflow: hidden;
		text-overflow: ellipsis;
		-o-text-overflow: ellipsis;
		max-height: 22px;
	}

.bidbuyHistory .auctionItem td.timeLeft .amount
{
	margin-right: 5px;
}

.bidbuyHistory .auctionItem td.timeLeft .amount, .bidbuyHistory .auctionItem td.timeLeft .description
{
	display: inline-block;
}

.bidbuyHistory .auctionItem td.timeLeft .amount, .bidbuyHistory .auctionItem .availability .amount
{
	font-size: 110%;
	font-weight: bold;
}

.bidbuyHistory .auctionItem td.timeLeft, .bidbuyHistory .auctionItem td.highestBidder, .bidbuyHistory .auctionItem .availability 
{
	text-align: center;
}

.bidbuyHistory .auctionItem td.highestBidder 
{
	font-size: 110%;
	font-weight: bold;
}

	.bidbuyHistory .auctionItem td.highestBidder.me
	{
		color: green;
	}
	
	.bidbuyHistory .auctionItem td.highestBidder.notme
	{
		color: red;
	}
	
.bidbuyHistory .auctionItem td.purchaseAmount dt, .bidbuyHistory .auctionItem td.purchaseAmount dd
{
	display: inline-block;
}

.bidbuyHistory .auctionItem td.purchaseAmount dt
{
	clear: right;
}

.bidbuyHistory .auctionItem td.purchaseAmount dd
{
	font-weight: bold;
}

.bidbuyHistory .auctionItem td.purchaseDate
{
	text-align: center;
}

.bidbuyHistory .auctionItem td.bid
{
	text-align: right;
}

	.bidbuyHistory .auctionItem td.bid span
	{
		font-weight: bold;
	}
	
		.bidbuyHistory .auctionItem td.bid > ul > li
		{
			display: inline-block;
			vertical-align: middle;
			width: 49%;
			text-align: center;
		}
		
			.bidbuyHistory .auctionItem td.bid > ul > li.single
			{
				width: 100%;
			}
			
			.bidbuyHistory .auctionItem td.bid > ul > li.large
			{
				font-size: 120%;
			}]]></template>
    <template title="auction_history_list_item" version_id="0" version_string=""><![CDATA[<tr class="primaryContent auctionItem status_{$auction.status}">
	<td class="icon">
		<div></div>
	</td>
	<td class="title">
		<h3 class="title"><a class="OverlayTrigger" href="{xen:link 'auctions/details', '', 'id={$auction.auction_id}'}">{$auction.title}</a></h3>
	</td>
	<td class="timeLeft">
		<xen:if is="{$auction.status} == 'active'">
			{$auction.expiration_date}
		<xen:elseif is="{$auction.status} == 'canceled'"/>
			{xen:phrase canceled}
		<xen:else/>
			<xen:if is="{$auction.top_bidder}">
				{xen:phrase finished}
			<xen:else/>
				{xen:phrase expired}
			</xen:if>		
		</xen:if>
	</td>
	<td class="highestBidder {xen:if '{$auction.username} == {$visitor.username}', 'me', 'notme'}">
		<xen:if is="{$auction.top_bidder}">
			{$auction.username}
		<xen:elseif is=" ! {$auction.min_bid}"/>
			<div class="availability">
				<div class="amount">{$auction.availability}</div>
				<div class="description">{xen:phrase available}</div>
			</div>
		<xen:else/>
			{xen:phrase no_bids}
		</xen:if>
	</td>
	<td class="bid">
		<ul>
			<xen:if is="{$auction.status} == 'active'">
				
				<xen:if is="{$auction.min_bid}">
					<xen:if is="{$auction.top_bid}">
						<li class="{xen:if '! {$auction.buy_now}', 'single'}">
							<span>{xen:number $auction.top_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
						</li>
					<xen:else/>
						<li class="{xen:if '! {$auction.buy_now}', 'single'}">
							<span>{xen:number $auction.min_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
						</li>
					</xen:if>
				</xen:if>
				<xen:if is="{$auction.buy_now}">
					<li class="{xen:if '! {$auction.min_bid}', 'single'}">
						<span>{xen:number $auction.buy_now}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/buyout', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</a>
					</li>
				</xen:if>
				
			<xen:elseif is="{$auction.status} == 'canceled'"/>
				
				<li class="single large"><span>{xen:phrase canceled}</span></li>
				
			<xen:else/>
			
				<li class="single large"><span>{xen:number $auction.amount}</span></li>
			
			</xen:if>
		</ul>
	</td>
</tr>]]></template>
    <template title="auction_list" version_id="1" version_string="1.0 Beta 1"><![CDATA[<xen:title>{xen:phrase auctions}</xen:title>

<xen:require css="auction_list.css" />
<xen:require js="js/xenauction/auctions.js" />

<div class="pageNavLinkGroup">
	<xen:pagenav link="auctions" page="{$page}" perpage="{$perPage}" total="{$total}" />
</div>

<table class="section auctions">
	
	<tbody>

		<xen:foreach loop="$auctions" value="$auction">
			<xen:include template="auction_list_item"/>
		</xen:foreach>
	
	</tbody>
		
</table>

<div class="pageNavLinkGroup">
	<xen:pagenav link="auctions" page="{$page}" perpage="{$perPage}" total="{$total}" />
</div>

<xen:sidebar>
	<xen:if is="{xen:helper auction, hasPermission, 'createAuctions'}">
		<div class="section secondaryContent auctionCreate">
			<a href="{xen:link auction-process/create}" class="callToAction">
				<span>{xen:phrase create_auction}</span>
			</a>
		</div>
	</xen:if>
	
	<xen:if is="{xen:helper auction, hasPermission, 'searchAuctions'}">
		<div class="section">
			<form action="{xen:link auctions}" method="post" class="secondaryContent findAuction">
				<h3>{xen:phrase find_auction}</h3>
					
				<input type="search" name="search" placeholder="{xen:phrase keyword_tag}..." value="{$search}" results="0" class="textCtrl" />
				<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
			</form>
		</div>
	</xen:if>
	
	<xen:if is="{$tags}">	
		<div class="section">
			<form action="{xen:link auctions}" method="post" class="secondaryContent findAuction">
				<h3>{xen:phrase filter_by_tag}</h3>

				<select name="tag">
					<option value="-1">{xen:phrase select_one}</option>
					<xen:foreach loop="$tags" value="$tag">
						<option>{$tag}</option>
					</xen:foreach>
				</select>
				
				<input type="submit" value="{xen:phrase filter}"/>

				<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
			</form>
		</div>
	</xen:if>

<!--	<div class="section">
		<form action="{xen:link auction-process/expire}" method="POST" class="secondaryContent">
			<h3>Expire Auction (DEV TOOL)</h3>
				
			<p>You can see the auction ID by clicking on a title and checking the "id=xxx" portion in the url</p>

			<input type="id" name="id" placeholder="ID" class="textCtrl"/>
			<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
		</form>
	</div>-->

</xen:sidebar>

<script type="text/javascript">
<!--
<xen:include template="auction_phrases_js"/>

new XenAuction.List;
-->
</script>]]></template>
    <template title="auction_list.css" version_id="1" version_string="1.0 Beta 1"><![CDATA[table.auctions
{
	width: 100%;
}

/* Item widths */

.auctions .auctionItem > td
{
	padding: 10px 0;
	vertical-align: middle;
}

	.auctions .auctionItem td.icon
	{
		width: 70px;
		text-align: center;
	}

	.auctions .auctionItem td.timeLeft
	{
		width: 100px;
	}

	.auctions .auctionItem td.highestBidder
	{
		width: 95px;
	}

	.auctions .auctionItem td.bid
	{
		width: 130px;
	}

/* Styling */

.auctions .auction_list .titleBar
{
	display: none;
}

.auctions .auctionItem .icon > img
{ 
	border-radius: 4px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	-khtml-border-radius: 4px;
}

.auctions .auctionItem td.descriptionWrap h3 
{
	font-weight: bold;
	font-size: 120%;
}

	.auctions .auctionItem td.descriptionWrap h3  a
	{
		display: block;
		overflow: hidden;
		text-overflow: ellipsis;
		-o-text-overflow: ellipsis;
		max-height: 22px;
	}

.auctions .auctionItem td.descriptionWrap .tags
{
	float: right;
	font-size: 90%;
	color: {xen:property dimmedTextColor};
}

.auctions .auctionItem td.timeLeft .amount, .auctions .auctionItem .availability .amount
{
	font-size: 110%;
	font-weight: bold;
}

.auctions .auctionItem td.timeLeft, .auctions .auctionItem td.highestBidder, .auctions .auctionItem .availability 
{
	text-align: center;
}

.auctions .auctionItem td.highestBidder .img
{
	margin: auto;
}

.auctions .auctionItem td.bid
{
	text-align: right;
}

	.auctions .auctionItem td.bid span
	{
		display: block;
		float: left;
		width: 50%;
		text-align: right;
		font-weight: bold;
	}

		.auctions .auctionItem td.bid > ul > li:last-child
		{
			border-top: 1px solid {xen:property primaryLighterStill};
		}

		.auctions .auctionItem td.bid > ul > li:first-child
		{
			border-top: 0px !important;
		}

.auctionCreate
{
	padding: 20px;
	text-align: center;
}

	.auctionCreate a.callToAction
	{
		height: 25px;
		line-height: 25px;
	}

	.auctionCreate a.callToAction span
	{
		font-size: 14px;
	}]]></template>
    <template title="auction_list_item" version_id="1" version_string="1.0 Beta 1"><![CDATA[<xen:require css="auction_list.css" />
<xen:require js="js/xenauction/auctions.js" />

<tr class="primaryContent auctionItem status_{$auction.status}">
	
	<td class="icon">{xen:helper auction, image, $auction, 's', true}</td>
	<td class="descriptionWrap">
		<span class="tags">{xen:helper auction, tags, $auction.tags}</span>
		<h3 class="title"><a class="OverlayTrigger" href="{xen:link 'auctions/details', '', 'id={$auction.auction_id}'}">{$auction.title}</a></h3>
		<div class="description">{xen:string wordtrim, {xen:helper auction, stripHtml, {$auction.message}}, 80}</div>
	</td>
	<td class="timeLeft">
		<xen:if is="{$auction.status} == 'active'">
			{$auction.expiration_date}
			<xen:elseif is="{$auction.status} == 'canceled'"/>
				{xen:phrase canceled}
				<xen:else/>
				<xen:if is="{$auction.top_bidder}">
					{xen:phrase finished}
					<xen:else/>
					{xen:phrase expired}
				</xen:if>		
			</xen:if>
	</td>
	<td class="highestBidder">
		<xen:if is="{$auction.top_bidder}">
			<xen:avatar user="$auction" size="s" />
			<xen:elseif is=" ! {$auction.min_bid}"/>
				<div class="availability">
					<div class="amount">{$auction.availability}</div>
					<div class="description">{xen:phrase available}</div>
				</div>
				<xen:else/>
				{xen:phrase no_bids}
			</xen:if>
	</td>
	<td class="bid">
		<ul>
			<xen:if is="{$auction.min_bid}">
				<xen:if is="{$auction.top_bid}">
					<li>
						<span>{xen:number $auction.top_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
					</li>
					<xen:else/>
						<li>
							<span>{xen:number $auction.min_bid}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/bid', '', 'id={$auction.auction_id}'}">{xen:phrase place_bid}</a>
						</li>
					</xen:if>
				</xen:if>
				<xen:if is="{$auction.buy_now}">
					<li>
						<span>{xen:number $auction.buy_now}</span> <a class="OverlayTrigger" href="{xen:link 'auction-bid/buyout', '', 'id={$auction.auction_id}'}">{xen:phrase buy_now}</a>
					</li>
				</xen:if>
			</ul>
	</td>
	
</tr>]]></template>
    <template title="auction_phrases_js" version_id="0" version_string=""><![CDATA[XenAuction.Config.currentTime 			= '{xen:helper auction, time}';
XenAuction.Config.phrases.secondsLeft 	= '{xen:phrase seconds_left}';
XenAuction.Config.phrases.minutesLeft 	= '{xen:phrase minutes_left}';
XenAuction.Config.phrases.hoursLeft 	= '{xen:phrase hours_left}';
XenAuction.Config.phrases.daysLeft 		= '{xen:phrase days_left}';

XenAuction.Config.phrases.errorInvalidQuantity 	= '{xen:phrase quantity_not_available}';
XenAuction.Config.phrases.errorBidTooLow 		= '{xen:phrase bid_must_be_higher}';]]></template>
    <template title="navigation_tab_auctions" version_id="0" version_string=""><![CDATA[<ul class="secondaryContent blockLinksList">
	<xen:if is="{xen:helper auction, hasPermission, 'viewAuctions'}">
		<li><a href="{xen:link auctions}">{xen:phrase auction_list}</a></li>
		<li><a href="{xen:link auction-history}">{xen:phrase history}</a></li>
	</xen:if>
	<xen:if is="{xen:helper auction, hasPermission, 'createAuctions'}">
		<li><a href="{xen:link auction-process/create}">{xen:phrase create_auction}</a></li>
	</xen:if>
</ul>]]></template>
  </templates>
  <bb_code_media_sites/>
  <template_modifications/>
</addon>
